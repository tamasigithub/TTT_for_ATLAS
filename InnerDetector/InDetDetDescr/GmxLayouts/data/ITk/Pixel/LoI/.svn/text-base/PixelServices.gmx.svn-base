<shapes>
  <tube name="PST_0"
        rmin="PstInnerRadius"
        rmax="PstOuterRadius"
        zhalflength="PstZhalflength_0"/>
  <tube name="PST_1"
        rmin="PstInnerRadius"
        rmax="PstOuterRadius"
        zhalflength="PstZhalflength_1"/>
  <tube name="PST_2"
        rmin="PstInnerRadius"
        rmax="PstOuterRadius"
        zhalflength="PstZhalflength_2"/>

  <tube name="IST_0"
        rmin="IstInnerRadius"
        rmax="IstOuterRadius"
        zhalflength="IstZhalflength_0"/>
  <tube name="IST_1"
        rmin="IstInnerRadius"
        rmax="IstOuterRadius"
        zhalflength="IstZhalflength_1"/>
  <tube name="IST_2"
        rmin="IstInnerRadius"
        rmax="IstOuterRadius"
        zhalflength="IstZhalflength_2"/>
  <tube name="IST_3"
        rmin="IstInnerRadius"
        rmax="IstOuterRadius"
        zhalflength="IstZhalflength_3"/>

  <tube name="OuterPixelZPath_0"
        rmin="OuterPixelZPathInnerRadius"
        rmax="OuterPixelZPathOuterRadius-EPS"
        zhalflength="OuterPixelZPathZhalflength_0"/>
  <tube name="OuterPixelZPath_1"
        rmin="OuterPixelZPathInnerRadius"
        rmax="OuterPixelZPathOuterRadius-EPS"
        zhalflength="OuterPixelZPathZhalflength_1-EPS"/>
  <tube name="OuterPixelZPath_2"
        rmin="OuterPixelZPathInnerRadius"
        rmax="OuterPixelZPathOuterRadius-EPS"
        zhalflength="OuterPixelZPathZhalflength_2-EPS"/>

  <tube name="InnerPixelZPath_0"
        rmin="InnerPixelZPathInnerRadius"
        rmax="InnerPixelZPathOuterRadius-EPS"
        zhalflength="InnerPixelZPathZhalflength_0"/>
  <tube name="InnerPixelZPath_1"
        rmin="InnerPixelZPathInnerRadius"
        rmax="InnerPixelZPathOuterRadius-EPS"
        zhalflength="InnerPixelZPathZhalflength_1-EPS"/>
  <tube name="InnerPixelZPath_2"
        rmin="InnerPixelZPathInnerRadius"
        rmax="InnerPixelZPathOuterRadius-EPS"
        zhalflength="InnerPixelZPathZhalflength_2-EPS"/>
  <tube name="InnerPixelZPath_3"
        rmin="InnerPixelZPathInnerRadius"
        rmax="InnerPixelZPathOuterRadius-EPS"
        zhalflength="InnerPixelZPathZhalflength_3-EPS"/>

  <tube name="OuterPixelRPath_0"
        rmin="OuterPixelRPathInnerRadius_0"
        rmax="OuterPixelRPathOuterRadius_0"
        zhalflength="OuterPixelRPathZhalflength_0"/>
  <tube name="OuterPixelRPath_1"
        rmin="OuterPixelRPathInnerRadius_1"
        rmax="OuterPixelRPathOuterRadius_1"
        zhalflength="OuterPixelRPathZhalflength_1"/>
  <tube name="OuterPixelRPath_2"
        rmin="OuterPixelRPathInnerRadius_2"
        rmax="OuterPixelRPathOuterRadius_2"
        zhalflength="OuterPixelRPathZhalflength_2"/>

  <tube name="InnerPixelRPath_0"
        rmin="InnerPixelRPathInnerRadius_0"
        rmax="InnerPixelRPathOuterRadius_0"
        zhalflength="InnerPixelRPathZhalflength_0"/>
  <tube name="InnerPixelRPath_1"
        rmin="InnerPixelRPathInnerRadius_1"
        rmax="InnerPixelRPathOuterRadius_1"
        zhalflength="InnerPixelRPathZhalflength_1"/>

  <tube name="EndcapEos_0"
        rmin="EndcapEosInnerRadius"
        rmax="EndcapEosOuterRadius-EPS"
        zhalflength="EndcapEosZhalflength"/>
  <tube name="EndcapEos_1"
        rmin="EndcapEosInnerRadius"
        rmax="EndcapEosOuterRadius-EPS"
        zhalflength="EndcapEosZhalflength"/>
  <tube name="EndcapEos_2"
        rmin="EndcapEosInnerRadius"
        rmax="EndcapEosOuterRadius-EPS"
        zhalflength="EndcapEosZhalflength"/>
  <tube name="EndcapEos_3"
        rmin="EndcapEosInnerRadius"
        rmax="EndcapEosOuterRadius-EPS"
        zhalflength="EndcapEosZhalflength"/>
  <tube name="EndcapEos_4"
        rmin="EndcapEosInnerRadius"
        rmax="EndcapEosOuterRadius-EPS"
        zhalflength="EndcapEosZhalflength"/>
  <tube name="EndcapEos_5"
        rmin="EndcapEosInnerRadius"
        rmax="EndcapEosOuterRadius-EPS"
        zhalflength="EndcapEosZhalflength"/>

  <tube name="BarrelEos_0"
        rmin="BarrelEosInnerRadius_0"
        rmax="BarrelEosOuterRadius_0"
        zhalflength="BarrelEosZhalflength_0"/>
  <tube name="BarrelEos_1"
        rmin="BarrelEosInnerRadius_1"
        rmax="BarrelEosOuterRadius_1"
        zhalflength="BarrelEosZhalflength_1"/>
  <tube name="BarrelEos_2"
        rmin="BarrelEosInnerRadius_2"
        rmax="BarrelEosOuterRadius_2"
        zhalflength="BarrelEosZhalflength_2"/>
  <tube name="BarrelEos_3"
        rmin="BarrelEosInnerRadius_3"
        rmax="BarrelEosOuterRadius_3"
        zhalflength="BarrelEosZhalflength_3"/>
       
</shapes>

<logvol name="PST_0_LV" shape="PST_0" material="Air"/>
<logvol name="PST_1_LV" shape="PST_1" material="Air"/>
<logvol name="PST_2_LV" shape="PST_2" material="Air"/>

<logvol name="IST_0_LV" shape="IST_0" material="Air"/>
<logvol name="IST_1_LV" shape="IST_1" material="Air"/>
<logvol name="IST_2_LV" shape="IST_2" material="Air"/>
<logvol name="IST_3_LV" shape="IST_3" material="Air"/>

<logvol name="OuterPixelZPath_0_LV" shape="OuterPixelZPath_0" material="Air"/>
<logvol name="OuterPixelZPath_1_LV" shape="OuterPixelZPath_1" material="Air"/>
<logvol name="OuterPixelZPath_2_LV" shape="OuterPixelZPath_2" material="Air"/>

<logvol name="InnerPixelZPath_0_LV" shape="InnerPixelZPath_0" material="Air"/>
<logvol name="InnerPixelZPath_1_LV" shape="InnerPixelZPath_1" material="Air"/>
<logvol name="InnerPixelZPath_2_LV" shape="InnerPixelZPath_2" material="Air"/>
<logvol name="InnerPixelZPath_3_LV" shape="InnerPixelZPath_3" material="Air"/>

<logvol name="OuterPixelRPath_0_LV" shape="OuterPixelRPath_0" material="Air"/>
<logvol name="OuterPixelRPath_1_LV" shape="OuterPixelRPath_1" material="Air"/>
<logvol name="OuterPixelRPath_2_LV" shape="OuterPixelRPath_2" material="Air"/>

<logvol name="InnerPixelRPath_0_LV" shape="InnerPixelRPath_0" material="Air"/>
<logvol name="InnerPixelRPath_1_LV" shape="InnerPixelRPath_1" material="Air"/>

<logvol name="EndcapEos_0_LV" shape="EndcapEos_0" material="Air"/>
<logvol name="EndcapEos_1_LV" shape="EndcapEos_1" material="Air"/>
<logvol name="EndcapEos_2_LV" shape="EndcapEos_2" material="Air"/>
<logvol name="EndcapEos_3_LV" shape="EndcapEos_3" material="Air"/>
<logvol name="EndcapEos_4_LV" shape="EndcapEos_4" material="Air"/>
<logvol name="EndcapEos_5_LV" shape="EndcapEos_5" material="Air"/>

<logvol name="BarrelEos_0_LV" shape="BarrelEos_0" material="Air"/>
<logvol name="BarrelEos_1_LV" shape="BarrelEos_1" material="Air"/>
<logvol name="BarrelEos_2_LV" shape="BarrelEos_2" material="Air"/>
<logvol name="BarrelEos_3_LV" shape="BarrelEos_3" material="Air"/>

<!-- Assemblies are arranged after the mother volume, either Pixel_Barrel, Pixel_Forward or Pixel(outside the detector envelopes) --> 

<assembly name="PST_Pixel">
  <logvolref ref="PST_0_LV"/>
  <transform>
    <transformation name="PlacePst2A">
      <translation z="PstZhalflength_0+2*(
                      PstZhalflength_1)+
                      PstZhalflength_2"/>
    </transformation>
    <logvolref ref="PST_2_LV"/>
  </transform>
  <transform>
    <transformation name="PlacePst2C">
      <rotation    ycos="1" angle="PI"/>
      <translation z="PstZhalflength_0+2*(
                      PstZhalflength_1)+
                      PstZhalflength_2"/>
    </transformation>
    <logvolref ref="PST_2_LV"/>
  </transform>
</assembly>

<assembly name="PST_Forward">
  <logvolref ref="PST_1_LV"/>
</assembly>

<assembly name="IST_Barrel">
  <logvolref ref="IST_0_LV"/>
</assembly>

<assembly name="IST_Forward">
  <logvolref ref="IST_2_LV"/>
</assembly>

<assembly name="IST_Pixel">
  <transform>
    <transformation name="PlaceIst1A">
      <translation z="IstZhalflength_0+
                      IstZhalflength_1"/>
    </transformation>
    <logvolref ref="IST_1_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceIst1C">
      <rotation    ycos="1" angle="PI"/>
      <translation z="IstZhalflength_0+
                      IstZhalflength_1"/>
    </transformation>
    <logvolref ref="IST_1_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceIst3A">
      <translation z="IstZhalflength_0+2*(
                      IstZhalflength_1+
                      IstZhalflength_2)+
                      IstZhalflength_3"/>
    </transformation>
    <logvolref ref="IST_3_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceIst3C">
      <rotation    ycos="1" angle="PI"/>
      <translation z="IstZhalflength_0+2*(
                      IstZhalflength_1+
                      IstZhalflength_2)+
                      IstZhalflength_3"/>
    </transformation>
    <logvolref ref="IST_3_LV"/>
  </transform>
</assembly>

<assembly name="OuterPixelZPath_Forward">
  <logvolref ref="OuterPixelZPath_1_LV"/>
</assembly>

<assembly name="OuterPixelZPath_Pixel">
  <transform>
    <transformation name="PlaceOuterZpath_0A">
      <translation z="OuterPixelZPathZmin+
                      OuterPixelZPathZhalflength_0"/>
    </transformation>
    <logvolref ref="OuterPixelZPath_0_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceOuterZpath_0C">
      <rotation    ycos="1" angle="PI"/>
      <translation z="OuterPixelZPathZmin+
                      OuterPixelZPathZhalflength_0"/>
    </transformation>
    <logvolref ref="OuterPixelZPath_0_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceOuterZpath_2A">
      <translation z="OuterPixelZPathZmin+2*(
                      OuterPixelZPathZhalflength_0+
                      OuterPixelZPathZhalflength_1)+
                      OuterPixelZPathZhalflength_2"/>
    </transformation>
    <logvolref ref="OuterPixelZPath_2_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceOuterZpath_2C">
      <rotation    ycos="1" angle="PI"/>
      <translation z="OuterPixelZPathZmin+2*(
                      OuterPixelZPathZhalflength_0+
                      OuterPixelZPathZhalflength_1)+
                      OuterPixelZPathZhalflength_2"/>
    </transformation>
    <logvolref ref="OuterPixelZPath_2_LV"/>
  </transform>
</assembly>

<assembly name="InnerPixelZPath_Barrel">
  <transform>
    <transformation name="PlaceInnerZpath0">
      <translation z="InnerPixelZPathZmin+
                      InnerPixelZPathZhalflength_0"/>
    </transformation>
    <logvolref ref="InnerPixelZPath_0_LV"/>
  </transform>
</assembly>


<assembly name="InnerPixelZPath_Forward">
  <logvolref ref="InnerPixelZPath_2_LV"/>
</assembly>

<assembly name="InnerPixelZPath_Pixel">
  <transform>
    <transformation name="PlaceInnerZpath_1A">
      <translation z="InnerPixelZPathZmin+2*(
                      InnerPixelZPathZhalflength_0)+
                      InnerPixelZPathZhalflength_1"/>
    </transformation>
    <logvolref ref="InnerPixelZPath_1_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceInnerZpath_1C">
      <rotation    ycos="1" angle="PI"/>
      <translation z="InnerPixelZPathZmin+2*(
                      InnerPixelZPathZhalflength_0)+
                      InnerPixelZPathZhalflength_1"/>
    </transformation>
    <logvolref ref="InnerPixelZPath_1_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceInnerZpath_3A">
      <translation z="InnerPixelZPathZmin+2*(
                      InnerPixelZPathZhalflength_0+
                      InnerPixelZPathZhalflength_1+
                      InnerPixelZPathZhalflength_2)+
                      InnerPixelZPathZhalflength_3"/>
    </transformation>
    <logvolref ref="InnerPixelZPath_3_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceInnerZpath_3C">
      <rotation    ycos="1" angle="PI"/>
      <translation z="InnerPixelZPathZmin+2*(
                      InnerPixelZPathZhalflength_0+
                      InnerPixelZPathZhalflength_1+
                      InnerPixelZPathZhalflength_2)+
                      InnerPixelZPathZhalflength_3"/>
    </transformation>
    <logvolref ref="InnerPixelZPath_3_LV"/>
  </transform>
</assembly>


<assembly name="OuterPixelRPath_Barrel">
  <transform>
    <transformation name="PlaceOuterRPath_1A">
      <translation z="OuterPixelRPathZmin_1"/>
    </transformation>
    <logvolref ref="OuterPixelRPath_1_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceOuterRPath_1C">
      <rotation    ycos="1" angle="PI"/>
      <translation z="OuterPixelRPathZmin_1"/>
    </transformation>
    <logvolref ref="OuterPixelRPath_1_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceOuterRPath_2A">
      <translation z="OuterPixelRPathZmin_2"/>
    </transformation>
    <logvolref ref="OuterPixelRPath_2_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceOuterRPath_2C">
      <rotation    ycos="1" angle="PI"/>
      <translation z="OuterPixelRPathZmin_2"/>
    </transformation>
    <logvolref ref="OuterPixelRPath_2_LV"/>
  </transform>
</assembly>

<assembly name="OuterPixelRPath_Pixel">
  <transform>
    <transformation name="PlaceOuterRPath_0A">
      <translation z="OuterPixelRPathZmin_0"/>
    </transformation>
    <logvolref ref="OuterPixelRPath_0_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceOuterRPath_0C">
      <rotation    ycos="1" angle="PI"/>
      <translation z="OuterPixelRPathZmin_0"/>
    </transformation>
    <logvolref ref="OuterPixelRPath_0_LV"/>
  </transform>
</assembly>

<assembly name="InnerPixelRPath_Barrel">
  <transform>
    <transformation name="PlaceInnerRPath_0A">
      <translation z="InnerPixelRPathZmin_0"/>
    </transformation>
    <logvolref ref="InnerPixelRPath_0_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceInnerRPath_0C">
      <rotation    ycos="1" angle="PI"/>
      <translation z="InnerPixelRPathZmin_0"/>
    </transformation>
    <logvolref ref="InnerPixelRPath_0_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceInnerRPath_1A">
      <translation z="InnerPixelRPathZmin_1"/>
    </transformation>
    <logvolref ref="InnerPixelRPath_1_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceInnerRPath_1C">
      <rotation    ycos="1" angle="PI"/>
      <translation z="InnerPixelRPathZmin_1"/>
    </transformation>
    <logvolref ref="InnerPixelRPath_1_LV"/>
  </transform>
</assembly>

<assembly name="EndcapEOS_Forward">
  <transform>
    <transformation name="PlaceEndcapEos_0">
      <translation z="-PstZhalflength_1-PstZhalflength_0+EndcapEosZpos_0"/>
    </transformation>
    <logvolref ref="EndcapEos_0_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceEndcapEos_1">
      <translation z="-PstZhalflength_1-PstZhalflength_0+EndcapEosZpos_1"/>
    </transformation>
    <logvolref ref="EndcapEos_1_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceEndcapEos_2">
      <translation z="-PstZhalflength_1-PstZhalflength_0+EndcapEosZpos_2"/>
    </transformation>
    <logvolref ref="EndcapEos_2_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceEndcapEos_3">
      <translation z="-PstZhalflength_1-PstZhalflength_0+EndcapEosZpos_3"/>
    </transformation>
    <logvolref ref="EndcapEos_3_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceEndcapEos_4">
      <translation z="-PstZhalflength_1-PstZhalflength_0+EndcapEosZpos_4"/>
    </transformation>
    <logvolref ref="EndcapEos_4_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceEndcapEos_5">
      <translation z="-PstZhalflength_1-PstZhalflength_0+EndcapEosZpos_5"/>
    </transformation>
    <logvolref ref="EndcapEos_5_LV"/>
  </transform>
</assembly>


<assembly name="BarrelEosSide">
  <transform>
    <transformation name="PlaceBarrelEos_0">
      <translation z="BarrelEosZpos_0"/>
    </transformation>
    <logvolref ref="BarrelEos_0_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceBarrelEos_1">
      <translation z="BarrelEosZpos_1"/>
    </transformation>
    <logvolref ref="BarrelEos_1_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceBarrelEos_2">
      <translation z="BarrelEosZpos_2"/>
    </transformation>
    <logvolref ref="BarrelEos_2_LV"/>
  </transform>
  <transform>
    <transformation name="PlaceBarrelEos_3">
      <translation z="BarrelEosZpos_3"/>
    </transformation>
    <logvolref ref="BarrelEos_3_LV"/>
  </transform>
</assembly>

<assembly name="BarrelEOS_Barrel">
  <assemblyref ref="BarrelEosSide"/>
  <transform>
    <transformation name="PlaceBarrelEosSide">
      <rotation ycos="1" angle="PI"/>
    </transformation>
    <assemblyref ref="BarrelEosSide"/>
  </transform>
</assembly>

<assembly name="Pixel_BarrelServices">
 <assemblyref ref="IST_Barrel"/>
 <assemblyref ref="InnerPixelZPath_Barrel"/>
 <assemblyref ref="OuterPixelRPath_Barrel"/>
 <assemblyref ref="InnerPixelRPath_Barrel"/>
 <assemblyref ref="BarrelEOS_Barrel"/>
</assembly>

<assembly name="Pixel_ForwardServices">
  <assemblyref ref="PST_Forward"/>
  <assemblyref ref="IST_Forward"/>
  <assemblyref ref="OuterPixelZPath_Forward"/>
  <assemblyref ref="InnerPixelZPath_Forward"/>
  <assemblyref ref="EndcapEOS_Forward"/>
</assembly>

<assembly name="Pixel_PixelServices">
  <assemblyref ref="PST_Pixel"/>
  <assemblyref ref="IST_Pixel"/>
  <assemblyref ref="OuterPixelZPath_Pixel"/>
  <assemblyref ref="InnerPixelZPath_Pixel"/>
  <assemblyref ref="OuterPixelRPath_Pixel"/>
</assembly>
